# Getting Started with R

**Week 1** - Introduction to R and RStudio

In this first workshop, weâ€™ll introduce you to **R**, **RStudio**, and the basics of coding. Youâ€™ll be writing your first lines of R code and importing data today!


# Why R? {.unnumbered}

R is a **free, open-source programming language** designed for data analysis, statistics, and graphing. 
It's widely used in ecology and conservation science and offers several benefits over proprietary softwares such as:

- **Open-source**: Free to install and use â€” forever.
- **Reproducible**: Your code is your record of what you did.
- **Powerful**: Easily handles large datasets, statistics, modelling, and maps.
- **Community**: R has a huge global community of ecologists and scientists to help troubleshoot and develop better packages.

# Before we start {.unnumbered}

This step can be skipped if you have R and Rstudio already downloaded and installed.

### Murdoch computer {.unnumbered}

All Murdoch computers have R and Rstudio available. Login to your account and access Rstudio on your work computer.

### Your own computer {.unnumbered}

If you are using your own personal computer in this unit, here are the steps for downloading and installing R and Rstudio.

1. **Install R**
   - Go to [https://cran.r-project.org](https://cran.r-project.org)
   - Choose your operating system and follow the instructions to install.

2. **Install RStudio**
   - Go to [https://posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/)
   - Download the free version of RStudio Desktop.
   - Install it on your computer.

# Step 1: Open RStudio {.unnumbered}

Once you have opened RStudio, you are introduced to the interface where you can see four panels:

- **Console**: Where commands run.
- **Source**: Where you write and save your code.
- **Environment/History**: See your datasets and objects (variables) and previous commands (â€œHistoryâ€ tab).
- **Plots/Packages/Help/Files**: View graphs and manage tools. You can also use the â€œFilesâ€ tab to navigate and set the working directory. The â€œPlotsâ€ tab will show the output of any plots generated. In â€œPackagesâ€ you will see what packages are actively loaded, or you can attach installed packages. â€œHelpâ€ will display help files for R functions and packages. â€œViewerâ€ will allow you to view local web content (e.g. HTML outputs).


![**Fig. 1**. Layout with the four major windows (or panals) of the RStudio environment.](images/rstudio_session_4pane_layout.png)


# Step 2: First R Commands {.unnumbered}

Click **File > New File > R Script** to start.

Start by noting who is writing, the date, and the main goal. In our case, determining how many species from different taxa have been recorded in Perth Hereâ€™s an example, which you can copy, paste and edit into your new script and change the content:

```{r first}

# Week 1 workshop - Getting started
# Getting familiar with R and load a file
# Written by Nicholas Wu, 06/11/2024, Murdoch University

```

The # (hash/pound) is to tell R to not run this line of text. i.e., the comment will not be evaluated.
Typically, the # is used to annotate or give explanation for what the code is doing.

**Note**: Comment often and in detail. Someone should be able to understand what you did and why. Including your future self.

Letâ€™s try typing and running some code:

```{r example, eval=FALSE}

# Create a variable: number of frogs counted at a pond
frogs <- 18

# Add 5 frogs observed the next day
frogs_total <- frogs + 5

# Print result
frogs_total

```

Here, you can created a new object `frogs` with the assignment operator "[<-](https://stackoverflow.com/questions/6140694/is-there-a-technical-difference-between-and)". **object_name <- value**

Try this one too:

```{r leaf, eval=FALSE}
# Mean leaf size of 5 Eucalyptus trees (cmÂ²)
leaf_sizes <- c(23.4, 21.8, 25.1, 19.7, 22.5)

# Calculate the average leaf size using the mean() function
mean(leaf_sizes)
```

You can combine multiple elements into a [vector](https://www.w3schools.com/r/r_vectors.asp)[^1] with `c()`.

[^1]: A vector is simply a list of items that are of the same type.

### Exercise (1 min) {.unnumbered}

ðŸ§ª **Challenge: How would you find the largest leaf size?**


# Step 3: Loading Packages {.unnumbered}

![](images/base_import.png)

The next few lines of code usually load the packages you will be needing for your analysis.
A **package** is a bundle of commands that can be loaded into R to provide extra functionality. 
For example, you might load a package for formatting data, or for making maps.

To install a package, type `install.packages("package-name")`. 
You only need to install packages once, so in this case you can type directly in the console box, rather than saving the line in your script and re-installing the package every time.

Once installed, you just need to load the packages using `library(package-name)`.
Here, we will load the most common packages we will be using in this unit.

The next lines of code should define your **working directory**. This is a folder on your computer where R will look for data, save your plots, etc. 
To make your workflow easier, it is good practice to save everything related to one project in the same place, as it will save you a lot of time typing up computer paths or hunting for files that got saved R-knows-where. 

For instance, you could save your script and all the data for this tutorial in a folder called â€œIntro_to_Râ€. (It is good practice to avoid spaces in file names as it can sometimes confuse R.) For bigger projects, consider having a root folder with the name of the project (e.g. â€œMy_PhDâ€) as your working directory, and other folders nested within to separate data, scripts, images, etc. (e.g. My_PhD/Chapter_1/data, My_PhD/Chapter_1/plots, My_PhD/Chapter_2/data, etc.)

To find out where your working directory is now, run the code `getwd()`. If you want to change it, you can use `setwd()`. Set your working directory to the folder you just downloaded from GitHub:


```{r packages, eval=FALSE}
# Install packages using the install.packages() function.
install.packages("tidyverse")

# Load the tidyverse package
library(tidyverse)

# This is an example filepath. Change the quoted area to your own filepath
setwd("C:/User/CC-1-RBasics-master")
```


:::{.callout-note}

## Note
There are quotation marks when installing a package, but not when loading it.

:::


# Step 4: Loading Files {.unnumbered}

Imagine weâ€™ve collected leaf-trait data to look at the growth of seedlings from **untreated** (control) and **calcium-treated** sites. The additional calcium is hypothesised to increase the growth of the seedlings.
The file is called `plant_calcium.csv` from the GitHub page.
The original data with background explanation of the study is linked [here](https://lter.github.io/lterdatasampler/articles/hbr_maples_vignette.html).


First, save the file from the [GitHub](https://github.com/nicholaswunz/ECS200) page to your RStudio project folder (wherever you set your directory).

```{r load data, eval=FALSE}
# Load a CSV file
plant_calcium_data <- read_csv("C:/Users/75002992/OneDrive - Murdoch University/Teaching/ECS200/ECS200 - Workshop/data/plant_calcium.csv")

# View the first few rows
head(plant_calcium_data)

# Displays the last rows
tail(plant_calcium_data) 

 # Tells you whether the variables are continuous, integers, categorical or characters
str(plant_calcium_data)                

```


:::{.callout-note}

## Note
Remember to save your script once in a while! If you havenâ€™t saved it already, why not save it in the same directory as the rest of the tutorial file, and give it a meaningful name.

:::



# Step 5: Exploring the Data {.unnumbered}

`str(object.name)` is a great command that shows the structure of your data ([atomic class](https://resbaz.github.io/2014-r-materials/lessons/01-intro_r/data-structures.html)). So often, analyses in R go wrong because R decides that a variable is a certain type of data that it is not. 
For instance, you might have four study groups that you simply called â€œ1, 2, 3, 4â€, and while you know that it should be a categorical grouping variable (i.e. a **factor**), R might decide that this column contains **numeric** (numbers) or **integer** (whole number or count) data. 
If your study groups were called â€œone, two, three, fourâ€, R might decide itâ€™s a **character** variable (words or strings of words), which will not get you far if you want to compare means among groups. 
Bottom line: always check your data structure!

| Class     | Description                                                               | Examples                                    | Use                                  |
|:---------:|:-------------------------------------------------------------------------:|:-------------------------------------------:|:------------------------------------:|
| numeric   | These are numbers that can take any value within a range (continuous).    | 3.14, -2.5, 100.5                           | Height, weight, temperature.         |
| integers  | Whole numbers without decimal points.                                     | 1, 10, 100, 0, -42                          | Counting items, indexing.            |
| factors   | Variables that take on a limited number of distinct values (categorical). | "low", "medium", "high" or "male", "female" | Grouping data, statistical modeling. |
| character | Text data.                                                                | "apple", "hello world"                      | Names, labels, descriptions.         |



You can see that when you run `str(plant_calcium_data)`, each column has the name of the varliable and the class type next to them. e.g. `year` is a *num* class (numeric), `elevation` is a *chr* class (character) etc.


Youâ€™ll notice the `watershed` variable shows as a character variable, but it should be a factor (categorical variable) consisting of a *reference* (untreated) category and a *W1* (calcium-trated) category, so weâ€™ll force it to be one. 
When you want to access just one column of a data frame, you append the variable name to the object name with a dollar $sign. 
This syntax lets you see, modify, and/or reassign this variable.

```{r dollar, eval=FALSE}

# Displays the first few rows of this column only (the reference group)
head(plant_calcium_data$watershed)

# Tells you what type of variable we're dealing with: it's character now but we want it to be a factor
class(plant_calcium_data$watershed)

# What are we doing here?!
plant_calcium_data$watershed <- as.factor(plant_calcium_data$watershed)

```

In that last line of code, the `as.factor(`) function turns whatever values you put inside into a factor (here, we specified we wanted to transform the character values in the `watershed` column from the edidiv object). 
However, if you were to run just the bit of code on the right side of the arrow, it would work that one time, but would not modify the data stored in the object. 
By assigning with the arrow the output of the function to the variable, the original `plant_calcium_data$watershed` in fact gets overwritten : the transformation is stored in the object. 
Try again to run `class(plant_calcium_data$watershed)` - what do you notice?

```{r more, eval=FALSE}
# More exploration

# Displays number of rows and columns
dim(plant_calcium_data)

# Gives you a summary of the data
summary(plant_calcium_data)

 # Gives you a summary of that particular variable (column) in your dataset
summary(plant_calcium_data$watershed) 

```


:::{.callout-note}

## Note

Whenever you see an error like this:

```{r library error, eval=FALSE}
#| eval: false
library(ggrepel)
#> Error in library(ggrepel) : there is no package called â€˜ggrepelâ€™
```

You need to run `install.packages("ggrepel")` to install the package.

:::


# Homework {.unnumbered}

Task for next week.

1. Create and manipulate variables:

- Create a variable called `birds` and assign it a value (e.g., number of birds seen).
- Create another variable called `sites` and assign it a value between 2 and 10.
- Add a third observation and multiple `birds` and `sites` to get the result in a new variable `birds_total`.


2. Work with vectors:

- Create a vector called `tree_heights` with ten numeric values, or generate .
- Find the average tree height using the base R function.
- Find the minimum tree height using the base R function.

3. Set a new R script working directory:

- Create a new R script and include the header with the workshop name, the main goal and your name and date for the next workshop.
- Load the `tidyverse` package.
- set up your directory.
- Load the `plant_calcium.csv`.

We will use this new R script for the next workshop.

**Note**: You can use Google and ChatGPT to find the approariate function. 
In the real world, you won't be remembering every single function, but your skills in finding and using the right function will greatly help your career. 
In your future job, don't just blindly cut and paste code to your R script. 
Understand why the code is presented and if it is relevent to your task. 
I've noticed AI models sometimes give extra code or takes unncessesary steps to get to the answer. Be efficient and comfortable with your code.


## For the adventurous folks {.unnumbered}

For those comforable with R and coding and would like an additional challenge. Here is a task for you before the next week. 

- Create a vector `tree_heights` with 100 numeric values between 0-50 using the R random number generator. 
- Find the quartile range of the from the `tree_heights`vector.


```{r answer, include=FALSE, eval=FALSE}

# sample.int will generate 100 random numbers from the range 1â€“50. The replace = TRUE which samples with replacing the previous generated number (i.e independent):
tree_heights <- sample(1:50, 100, replace = TRUE)

quantile(tree_heights).

```

# Extra Stuff {.unnumbered}

- Loading [other file types](https://r4ds.hadley.nz/data-import.html#other-file-types) (if not .csv).
